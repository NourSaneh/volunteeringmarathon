<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin</title>
  <script>
    window.onload = function () {
      fetch('../server/check_session.php')
        .then(res => res.json())
        .then(data => {
          if (data.loggedIn) {
            window.location.href = 'dashboard.html';
          }
        });
    };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>
<body class="bg-gray-100 h-screen flex items-center justify-center relative">

  <a href="../index.html" class="absolute top-4 left-4 text-green-600 hover:text-green-800 transition text-xl">
    <i class="ph ph-arrow-left"></i>
  </a>

  <form id="loginForm" class="bg-white p-8 rounded shadow-md w-full max-w-sm space-y-4">
    <h2 class="text-2xl font-bold text-center text-green-600">Admin Login</h2>

    <input type="text" name="username" placeholder="Username" required
      class="w-full p-2 border border-green-400 rounded focus:outline-none focus:ring-2 focus:ring-green-500">

    <input type="password" name="password" placeholder="Password" required
      class="w-full p-2 border border-green-400 rounded focus:outline-none focus:ring-2 focus:ring-green-500">

    <div id="error" class="text-red-500 text-sm hidden"></div>

    <button type="submit"
      class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 transition">Login</button>
  </form>

  <script>
    document.getElementById("loginForm").onsubmit = function (e) {
      e.preventDefault();

      const formData = new FormData(this);
      fetch("../server/login.php", {
        method: "POST",
        body: formData
      })
        .then(res => res.json())
        .then(data => {
          if (data.success) {
            window.location.href = "dashboard.html";
          } else {
            document.getElementById("error").innerText = data.message;
            document.getElementById("error").classList.remove("hidden");
          }
        });
    };
  </script>
</body>
</html>
